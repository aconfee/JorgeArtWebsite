function aboutController(e){var t=this;t.myVariable="I'm pretty cool, I guess."}function loginCtrl(e,t){var o=this;o.pageHeader={title:"Admin Sign In"},o.credentials={username:"",password:""},o.returnPage="/admin",o.onSubmit=function(){return o.formError="",o.credentials.username&&o.credentials.password?void o.doLogin():(o.formError="All fields required.",!1)},o.doLogin=function(){o.formError="",t.login(o.credentials).error(function(e){o.formError=e.message}).then(function(){e.path(o.returnPage)})}}!function(){function e(e,t){e.when("/",{templateUrl:"home/home.view.html",controller:"homeController",controllerAs:"viewModel"}).when("/about",{templateUrl:"about/about.view.html",controller:"aboutController",controllerAs:"viewModel"}).when("/projects/:projectid",{templateUrl:"projectPage/projectPage.view.html",controller:"projectPageController",controllerAs:"viewModel"}).when("/login",{templateUrl:"/login/login.view.html",controller:"loginCtrl",controllerAs:"viewModel"}).when("/admin",{templateUrl:"/admin/dashboard/dashboard.view.html",controller:"dashboardController",controllerAs:"viewModel"}).when("/admin/edit/:projectid",{templateUrl:"/admin/newProject/newProject.view.html",controller:"newProjectController",controllerAs:"viewModel"}).when("/admin/newProject",{templateUrl:"/admin/newProject/newProject.view.html",controller:"newProjectController",controllerAs:"viewModel"}).otherwise({redirectTo:"/"}),t.html5Mode(!0)}angular.module("PortfolioSPAModule",["ngRoute"]),angular.module("PortfolioSPAModule").config(["$routeProvider","$locationProvider",e])}(),angular.module("PortfolioSPAModule").controller("aboutController",aboutController),aboutController.$inject=["$scope"],function(){function e(e,t,o,r,n,i){var c=this,a=o.search().category,l=t.innerWidth,s=i.GetHomePageRowSize();c.videoLink=r.trustAsResourceUrl("https://www.youtube.com/embed/CJ_GCPaKywg"),c.coverImage="./images/cover.png",c.showCover=void 0===a,n.GetProjectsHomePage(a,function(e){c.projects=e}),angular.element(t).bind("resize",function(){t.innerWidth!==l&&s!==i.GetHomePageRowSize()&&(console.log("resizing"),l=t.innerWidth,s=i.GetHomePageRowSize(),n.GetProjectsHomePage(a,function(e){c.projects=e}))})}angular.module("PortfolioSPAModule").controller("homeController",e),e.$inject=["$scope","$window","$location","$sce","ProjectsService","ResponsiveService"]}(),angular.module("PortfolioSPAModule").controller("loginCtrl",loginCtrl),loginCtrl.$inject=["$location","AuthentictionService"],function(){function e(e,t,o,r){var n=this;n.project={},n.projectId=t.projectid,e.scrollTo(0,0),r.GetProject(n.projectId,function(e){n.project=e}),r.GetProjectPage(t.projectid,function(e){n.blogItems=e}),n.nextProject=function(){r.GetAllProjects(function(e){for(var t=0;t<e.length&&e[t]._id!==n.project._id;t++);t===e.length-1&&(t=-1),o.path("/projects/"+e[t+1]._id)})},n.previousProject=function(){r.GetAllProjects(function(e){for(var t=0;t<e.length&&e[t]._id!==n.project._id;t++);0===t&&(t=e.length),o.path("/projects/"+e[t-1]._id)})}}angular.module("PortfolioSPAModule").controller("projectPageController",e),e.$inject=["$window","$routeParams","$location","ProjectsService"]}(),function(){function e(e,t,o,r,n){var i=this;i.projects=[],i.projectToDelete={},n.isLoggedIn()===!1&&t.path("/login"),r.GetAllProjects(function(e){i.projects=e}),i.markForDelete=function(e){i.projectToDelete=i.projects[e]},i.deleteProject=function(){o["delete"]("/api/projects/"+i.projectToDelete._id,{headers:{Authorization:"Bearer "+n.getToken()}}).then(function(e){r.GetAllProjects(function(e){i.projects=e})},function(e){console.err("Something went wrong deleting a profile.")})}}angular.module("PortfolioSPAModule").controller("dashboardController",e),e.$inject=["$scope","$location","$http","ProjectsService","AuthentictionService"]}(),function(){function e(e,t,o,r,n,i,c){var a=this;if(n.isLoggedIn()===!1&&t.path("/login"),a.isNew=!1,t.absUrl().indexOf("newProject")>-1&&(a.isNew=!0),a.formMessageHeader="",a.formError="",a.created=!1,a.newProject={},a.fileData={},a.isNew===!1){var l=r.projectid;c.GetProject(l,function(e){a.newProject=e})}a.createProject=function(){a.newProject.projectCoverImageAspectRatio=s("#projectCoverImage"),o.post("/api/projects",a.newProject,{headers:{Authorization:"Bearer "+n.getToken()}}).then(function(e){a.formMessageHeader="Success!",a.formError="Project created.",a.created=!0,t.path("/admin")},function(e){a.formMessageHeader="Oops!",a.formError="Something went wrong trying to create project. "+e.data,a.created=!1})},a.editProject=function(){var e=r.projectid;a.newProject.projectCoverImageAspectRatio=s("#projectCoverImage"),o.put("/api/projects/"+e,a.newProject,{headers:{Authorization:"Bearer "+n.getToken()}}).then(function(e){a.formMessageHeader="Success!",a.formError="Project updated.",a.created=!0,t.path("/admin")},function(e){a.formMessageHeader="Oops!",a.formError="Something went wrong trying to save this project. "+e.data,a.created=!1})},a.uploadProjectCoverImage=function(){i.uploadImage(a.newProject.projectCoverImage,function(e){a.newProject.projectCoverImage=e.filepath},function(e){console.log("something went wrong trying to upload file.")})},a.uploadBlogItemCoverImage=function(e){i.uploadImage(a.newProject.pageItems[e].content,function(t){a.newProject.pageItems[e].content=t.filepath},function(e){console.log("something went wrong trying to upload file.")})},a.uploadToGallery=function(e){i.uploadImage(a.fileData,function(t){a.newProject.pageItems[e].contentArray.push(t.filepath)},function(e){console.log("something went wrong trying to upload file.")})},a.deleteFromContentArray=function(e,t){var o=a.contentArrayAccessCheck(e,t);o!==!1&&a.newProject.pageItems[e].contentArray.splice(t,1)},a.moveContentArrayItem=function(e,t,o){var r=a.contentArrayAccessCheck(e,t);if(r!==!1){var n=a.newProject.pageItems[e].contentArray[t];if(o){if(a.contentArrayAccessCheck(e,t-1)===!1)return;a.newProject.pageItems[e].contentArray[t]=a.newProject.pageItems[e].contentArray[t-1],a.newProject.pageItems[e].contentArray[t-1]=n}else{if(a.contentArrayAccessCheck(e,t+1)===!1)return;a.newProject.pageItems[e].contentArray[t]=a.newProject.pageItems[e].contentArray[t+1],a.newProject.pageItems[e].contentArray[t+1]=n}}},a.contentArrayAccessCheck=function(e,t){return!(void 0===a.newProject.pageItems||e>=a.newProject.pageItems.length||e<0)&&(void 0!==a.newProject.pageItems[e].contentArray&&0!==a.newProject.pageItems[e].contentArray.length&&!(t>=a.newProject.pageItems[e].contentArray.length||t<0))},a.addNewPageItem=function(){void 0===a.newProject.pageItems&&(a.newProject.pageItems=[]),a.newProject.pageItems.push({position:0,content:"",contentArray:[]})},a.removePageItem=function(e){a.newProject.pageItems.splice(e,1)},a.resetProject=function(){a.newProject={}};var s=function(e){var t=$("#projectCoverImage"),o=new Image;o.src=t.attr("src");var r=o.width/o.height;return r}}angular.module("PortfolioSPAModule").controller("newProjectController",e),e.$inject=["$scope","$location","$http","$routeParams","AuthentictionService","UploadService","ProjectsService"]}(),function(){function e(e,t){var o=function(t){e.localStorage["admin-token"]=t},r=function(){return e.localStorage["admin-token"]},n=function(e){return t.post("/api/login",e).success(function(e){o(e.token)})},i=function(){e.localStorage.removeItem("admin-token")},c=function(){var t=r();if(t){var o=JSON.parse(e.atob(t.split(".")[1]));return o.exp>Date.now()/1e3}return!1};return{login:n,logout:i,isLoggedIn:c,saveToken:o,getToken:r}}angular.module("PortfolioSPAModule").service("AuthentictionService",e),e.$inject=["$window","$http"]}(),function(){function e(e,t){var o=this;o.MapProjectDataToProjectPageVm=function(t){var o=t.pageItems;o.sort(function(e,t){return e.position>t.position});for(var r=0;r<t.pageItems.length;r++)"video"===t.pageItems[r].type&&(t.pageItems[r].content=e.trustAsResourceUrl(t.pageItems[r].content));return o},o.MapProjectsDataToHomePageVm=function(e){if(void 0===e)return void console.error("projects is undefined.");if(0===e.length)return void console.error("No projects in the projects array.");if(Array.isArray(e)===!1)return void console.error("Array of projects not provided.");e.sort(function(e,t){return e.position>t.position});var o=t.GetHomePageRowSize(),r=[],n=e.length/o;0===n&&(n=1);for(var i=0,c=0;c<n;c++){r.push([]);for(var a=0;a<o&&i!==e.length;a++,i++)r[c].push(e[i]);1===r[c].length&&(r[c][0].projectCoverImageAspectRatio=1)}return r}}angular.module("PortfolioSPAModule").service("DataMappingService",e),e.$inject=["$sce","ResponsiveService"]}(),function(){function e(e,t,o){var r=this;r.allProjectsFilter=void 0,r.designProjectsFilter="design",r.animationProjectsFilter="animation",r.illustrationProjectsFilter="illustration",r.artworkProjectsFilter="artwork",r.miscProjectsFilter="misc",r.GetAllProjects=function(e){t.get("/api/projects/").then(function(t){200===t.status&&(t.data.sort(function(e,t){return e.position>t.position}),e(t.data))},function(e){console.error("Something went wrong getting all projects.")})},r.GetProject=function(e,o){t.get("/api/projects/"+e).then(function(e){200===e.status&&o(e.data)},function(t){console.error("Something went wrong getting project page "+e)})},r.GetProjectPage=function(e,r){t.get("/api/projects/"+e).then(function(e){200===e.status&&r(o.MapProjectDataToProjectPageVm(e.data))},function(t){console.error("Something went wrong getting project page "+e)})},r.GetProjectsHomePage=function(e,r){t.get("/api/projects/").then(function(t){if(200===t.status){var i=n(t.data,e),c=o.MapProjectsDataToHomePageVm(i);r(c)}},function(e){console.log("Something went wrong while getting all projects.")})};var n=function(e,t){var o=[];if(t===r.allProjectsFilter)return e;for(var n=0;n<e.length;n++)e[n].category===t&&o.push(e[n]);return o}}angular.module("PortfolioSPAModule").service("ProjectsService",e),e.$inject=["$sce","$http","DataMappingService"]}(),function(){function e(e){var t=this,o=900,r=1500;t.GetHomePageRowSize=function(){var t=1;return e.innerWidth>o&&(t=2),e.innerWidth>r&&(t=3),t}}angular.module("PortfolioSPAModule").service("ResponsiveService",e),e.$inject=["$window"]}(),function(){function e(e,t){service=this,service.uploadImage=function(o,r,n){var i=new FormData;i.append("file",o),e.post("/api/upload",i,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+t.getToken()}}).success(function(e){r(e)}).error(function(e){n(e)})}}angular.module("PortfolioSPAModule").service("UploadService",e),e.$inject=["$http","AuthentictionService"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/adminHeader/adminHeader.directive.html",scope:{title:"@title"},controller:t,controllerAs:"viewModel"}}function t(e,t){var o=this;o.logout=function(){t.logout(),e.path("/")}}angular.module("PortfolioSPAModule").directive("adminHeader",e),t.$inject=["$location","AuthentictionService"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/coverImage/coverImage.directive.html"}}angular.module("PortfolioSPAModule").directive("coverImage",e)}(),function(){function e(){return{restrict:"EA",scope:{embededUrl:"=embededUrl"},templateUrl:"/common/directives/embededVideo/embededVideo.directive.html"}}angular.module("PortfolioSPAModule").directive("embededVideo",e)}(),function(){function e(e){return{restrict:"A",link:function(t,o,r){var n=e(r.fileModel),i=n.assign;o.bind("change",function(){t.$apply(function(){i(t,o[0].files[0])})})}}}angular.module("PortfolioSPAModule").directive("fileModel",["$parse",e])}(),function(){function e(){return{restrict:"EA",scope:{content:"=content",selectedImage:"=selectedImage"},templateUrl:"/common/directives/imageGallery/imageGallery.directive.html",controller:t,controllerAs:"ctrl"}}function t(e,t){var o=this,r=650,n=1e3;o.hoveredThumbIndex=-1;var i=function(){var e=2;return e=2,t.innerWidth>r&&(e=3),t.innerWidth>n&&(e=4),e},c=t.innerWidth,a=i();o.lightboxImage="",o.GalleryThumbClick=function(t){e.selectedImage=t},angular.element(t).bind("resize",function(){t.innerWidth!==c&&a!==i()&&(c=t.innerWidth,a=i(),console.log("resizing"),o.imageThumbs=l(e.content),e.$apply())});var l=function(e){for(var t=[],o=i(),r=Math.ceil(e.length/o),n=0,c=0;c<r;c++)for(var a=0;a<o&&(void 0===t[a]&&t.push([]),n!==e.length);a++,n++)t[a].push(e[n]);return t};o.imageThumbs=l(e.content)}angular.module("PortfolioSPAModule").controller("imageGalleryController",t).directive("imageGallery",e),t.$inject=["$scope","$window"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/imageLightbox/imageLightbox.directive.html",controller:t,controllerAs:"viewModel"}}function t(){var e=this;e.imageWidth="",$(document).ready(function(){$("#lightbox").on("shown.bs.modal",function(){var t=$("#lightbox img"),o=new Image;o.src=t.attr("src"),e.imageWidth=o.width,$(this).find(".modal-dialog").css("width",e.imageWidth)})})}angular.module("PortfolioSPAModule").directive("imageLightbox",e),t.$inject=[]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/navigationBar/navigationBar.directive.html",controller:t,controllerAs:"ctrl"}}function t(e){var t=this;t.isActive=function(t){return 1===t.length?"/"===e.path()&&void 0===e.search().category:e.absUrl().indexOf(t)!=-1}}angular.module("PortfolioSPAModule").directive("navigationBar",e),t.$inject=["$location"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/pageBreak/underline.directive.html"}}angular.module("PortfolioSPAModule").directive("underlinePageBreak",e)}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/textBlock/textBlock.directive.html"}}angular.module("PortfolioSPAModule").directive("textBlock",e)}();
//# sourceMappingURL=sourcemaps/dist.min.js.map
