function aboutController(e){var o=this;o.myVariable="I'm pretty cool, I guess."}function adminController(e,o,t,r,n){var i=this;r.isLoggedIn()===!1&&o.path("/login"),i.formMessageHeader="",i.formError="",i.created=!1,i.newProject={},i.fileData={},i.createProject=function(){var e=$("#projectCoverImage").width()/$("#projectCoverImage").height();i.newProject.projectCoverImageAspectRatio=e,t.post("/api/projects",i.newProject,{headers:{Authorization:"Bearer "+r.getToken()}}).then(function(e){i.formMessageHeader="Success!",i.formError="Project created.",i.created=!0},function(e){i.formMessageHeader="Oops!",i.formError="Something went wrong trying to create project. "+e.data.message,i.created=!1})},i.uploadProjectCoverImage=function(){n.uploadImage(i.newProject.projectCoverImage,function(e){i.newProject.projectCoverImage=e.filepath},function(e){console.log("something went wrong trying to upload file.")})},i.uploadBlogItemCoverImage=function(e){n.uploadImage(i.newProject.pageItems[e].content,function(o){i.newProject.pageItems[e].content=o.filepath},function(e){console.log("something went wrong trying to upload file.")})},i.uploadToGallery=function(e){n.uploadImage(i.fileData,function(o){i.newProject.pageItems[e].contentArray.push(o.filepath)},function(e){console.log("something went wrong trying to upload file.")})},i.addNewPageItem=function(){void 0===i.newProject.pageItems&&(i.newProject.pageItems=[]),i.newProject.pageItems.push({position:0,content:"",contentArray:[]})},i.logout=function(){r.logout(),o.path("/")}}function loginCtrl(e,o){var t=this;t.pageHeader={title:"Admin Sign In"},t.credentials={username:"",password:""},t.returnPage="/admin",t.onSubmit=function(){return t.formError="",t.credentials.username&&t.credentials.password?void t.doLogin():(t.formError="All fields required.",!1)},t.doLogin=function(){t.formError="",o.login(t.credentials).error(function(e){t.formError=e.message}).then(function(){e.path(t.returnPage)})}}!function(){function e(e,o){e.when("/",{templateUrl:"home/home.view.html",controller:"homeController",controllerAs:"viewModel"}).when("/about",{templateUrl:"about/about.view.html",controller:"aboutController",controllerAs:"viewModel"}).when("/projects/:projectid",{templateUrl:"projectPage/projectPage.view.html",controller:"projectPageController",controllerAs:"viewModel"}).when("/login",{templateUrl:"/login/login.view.html",controller:"loginCtrl",controllerAs:"viewModel"}).when("/admin",{templateUrl:"/admin/admin.view.html",controller:"adminController",controllerAs:"viewModel"}).otherwise({redirectTo:"/"}),o.html5Mode(!0)}angular.module("PortfolioSPAModule",["ngRoute"]),angular.module("PortfolioSPAModule").config(["$routeProvider","$locationProvider",e])}(),angular.module("PortfolioSPAModule").controller("aboutController",aboutController),aboutController.$inject=["$scope"],angular.module("PortfolioSPAModule").controller("adminController",adminController),adminController.$inject=["$scope","$location","$http","AuthentictionService","UploadService"],function(){function e(e,o,t,r,n){var i=this,l=t.search().category;i.videoLink=r.trustAsResourceUrl("https://www.youtube.com/embed/CJ_GCPaKywg"),i.showVideo=void 0===l,n.GetProjectsHomePage(l,function(e){i.projects=e}),angular.element(o).bind("resize",function(){n.GetProjectsHomePage(l,function(e){i.projects=e})})}angular.module("PortfolioSPAModule").controller("homeController",e),e.$inject=["$scope","$window","$location","$sce","ProjectsService"]}(),angular.module("PortfolioSPAModule").controller("loginCtrl",loginCtrl),loginCtrl.$inject=["$location","AuthentictionService"],function(){function e(e,o,t){var r=this;r.projectId=o.projectid,e.scrollTo(0,0),t.GetProjectPage(o.projectid,function(e){r.blogItems=e})}angular.module("PortfolioSPAModule").controller("projectPageController",e),e.$inject=["$window","$routeParams","ProjectsService"]}(),function(){function e(e,o){var t=function(o){e.localStorage["admin-token"]=o},r=function(){return e.localStorage["admin-token"]},n=function(e){return o.post("/api/login",e).success(function(e){t(e.token)})},i=function(){e.localStorage.removeItem("admin-token")},l=function(){var o=r();if(o){var t=JSON.parse(e.atob(o.split(".")[1]));return t.exp>Date.now()/1e3}return!1};return{login:n,logout:i,isLoggedIn:l,saveToken:t,getToken:r}}angular.module("PortfolioSPAModule").service("AuthentictionService",e),e.$inject=["$window","$http"]}(),function(){function e(e,o){var t=this;t.MapProjectDataToProjectPageVm=function(o){var t=o.pageItems;t.sort(function(e,o){return e.position>o.position});for(var r=0;r<o.pageItems.length;r++)"video"===o.pageItems[r].type&&(o.pageItems[r].content=e.trustAsResourceUrl(o.pageItems[r].content));return t},t.MapProjectsDataToHomePageVm=function(e){if(void 0===e)return void console.error("projects is undefined.");if(0===e.length)return void console.error("No projects in the projects array.");if(Array.isArray(e)===!1)return void console.error("Array of projects not provided.");var t=o.GetHomePageRowSize(),r=[],n=e.length/t;0===n&&(n=1);for(var i=0,l=0;n>l;l++){r.push([]);for(var c=0;t>c&&i!==e.length;c++,i++)r[l].push(e[i])}return r}}angular.module("PortfolioSPAModule").service("DataMappingService",e),e.$inject=["$sce","ResponsiveService"]}(),function(){function e(e,o,t){var r=this;r.allProjectsFilter=void 0,r.filmProjectsFilter="film",r.artProjectsFilter="art",r.GetProjectPage=function(e,r){o.get("/api/projects/"+e).then(function(e){200===e.status&&r(t.MapProjectDataToProjectPageVm(e.data))},function(o){console.error("Something went wrong getting project page "+e)})},r.GetProjectsHomePage=function(e,i){return e!==r.allProjectsFilter&&e!==r.filmProjectsFilter&&e!==r.artProjectsFilter?void console.error("Invalid category provided: "+e):void o.get("/api/projects/").then(function(o){if(200===o.status){var r=n(o.data,e),l=t.MapProjectsDataToHomePageVm(r);i(l)}},function(e){console.log("Something went wrong while getting all projects.")})};var n=function(e,o){var t=[];if(o===r.allProjectsFilter)return e;for(var n=0;n<e.length;n++)e[n].category===o&&t.push(e[n]);return t}}angular.module("PortfolioSPAModule").service("ProjectsService",e),e.$inject=["$sce","$http","DataMappingService"]}(),function(){function e(e){var o=this,t=900,r=1500;o.GetHomePageRowSize=function(){var o=1;return e.innerWidth>t&&(o=2),e.innerWidth>r&&(o=3),o}}angular.module("PortfolioSPAModule").service("ResponsiveService",e),e.$inject=["$window"]}(),function(){function e(e,o){service=this,service.uploadImage=function(t,r,n){var i=new FormData;i.append("file",t),e.post("/api/upload",i,{transformRequest:angular.identity,headers:{"Content-Type":void 0,Authorization:"Bearer "+o.getToken()}}).success(function(e){r(e)}).error(function(e){n(e)})}}angular.module("PortfolioSPAModule").service("UploadService",e),e.$inject=["$http","AuthentictionService"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/coverImage/coverImage.directive.html"}}angular.module("PortfolioSPAModule").directive("coverImage",e)}(),function(){function e(){return{restrict:"EA",scope:{embededUrl:"=embededUrl"},templateUrl:"/common/directives/embededVideo/embededVideo.directive.html"}}angular.module("PortfolioSPAModule").directive("embededVideo",e)}(),function(){function e(e){return{restrict:"A",link:function(o,t,r){var n=e(r.fileModel),i=n.assign;t.bind("change",function(){o.$apply(function(){i(o,t[0].files[0])})})}}}angular.module("PortfolioSPAModule").directive("fileModel",["$parse",e])}(),function(){function e(){return{restrict:"EA",scope:{content:"=content",selectedImage:"=selectedImage"},templateUrl:"/common/directives/imageGallery/imageGallery.directive.html",controller:o,controllerAs:"ctrl"}}function o(e,o){var t=this,r=650,n=1e3;t.lightboxImage="",t.GalleryThumbClick=function(o){e.selectedImage=o},angular.element(o).bind("resize",function(){console.log("resizing"),t.imageThumbs=l(e.content),e.$apply()});var i=function(){var e=2;return e=2,o.innerWidth>r&&(e=3),o.innerWidth>n&&(e=4),e},l=function(e){for(var o=[],t=i(),r=Math.ceil(e.length/t),n=0,l=0;r>l;l++)for(var c=0;t>c&&(void 0===o[c]&&o.push([]),n!==e.length);c++,n++)o[c].push(e[n]);return o};t.imageThumbs=l(e.content)}angular.module("PortfolioSPAModule").controller("imageGalleryController",o).directive("imageGallery",e),o.$inject=["$scope","$window"]}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/imageLightbox/imageLightbox.directive.html"}}angular.module("PortfolioSPAModule").directive("imageLightbox",e)}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/navigationBar/navigationBar.directive.html"}}angular.module("PortfolioSPAModule").directive("navigationBar",e)}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/pageBreak/underline.directive.html"}}angular.module("PortfolioSPAModule").directive("underlinePageBreak",e)}(),function(){function e(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/textBlock/textBlock.directive.html"}}angular.module("PortfolioSPAModule").directive("textBlock",e)}();
//# sourceMappingURL=sourcemaps/dist.min.js.map
